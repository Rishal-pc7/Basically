<link rel="stylesheet" href="/stylesheets/header.css">
<link rel="stylesheet" href="/stylesheets/cart.css">

<link rel="stylesheet" href="/stylesheets/responsive.css">
<script>
        
        !function(f,b,e,v,n,t,s){
        if(f.fbq)
        return;
        n=f.fbq=function(){
          n.callMethod?
          n.callMethod.apply(n,arguments):n.queue.push(arguments)};
          if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
          n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];
          s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
         fbq('init', '172181538913764');
         fbq('track', 'AddToCart');
     </script>
     <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=172181538913764&ev=PageView&noscript=1"
      /></noscript>   
<div class="return-policy" id="returnPolicy">
  <h5>Hassle Free Returns & Replacements for 7 days</h5>
</div>
<div class="mobile-nav" id="mob-nav">
    <div class="menus">
        <div class="side-menu" id="mobSideBar">
           <div class="header">
            <div class="close">
                <button class="close-btn" onclick="menuCloseBtnClicked()" id="menuCloseBtn"><i class="las la-times"></i></button>
            </div>
            <div class="nav-brand">
               <h2><a href="/" class="link">basic<span>ally</span>.</a></h2>
            </div>
            <div class="right-opts">
                {{#if user}}
                <button class="" style="font-size: 58px;"><a href="/accounts" style="color: #000;"><i class="las la-user-check"></i></a></button>
                {{else}}
                <button class=""><a href="/accounts" style="color: #000;"><i class="las la-user" ></i></a></button>
                {{/if}}
               <button class="" onclick="showCart()"><i class="las la-shopping-bag"></i></button>
               
            </div>
           </div>
           <div class="options">
            <ul>
                <li class="" ><a id="shopMobOpt" onclick="changeActiveOption(this)" class="active link">Shop</a></li>
                <li class="" ><a id="transMobOpt" onclick="changeActiveOption(this)" class="link">Transparency</a></li>
                <li class="" ><a id="abtMobOpt" onclick="changeActiveOption(this)" class="link">About us</a></li>
            </ul>
           </div>
           <div class="hoverOpts">
            <div class="MobOption activeOpts" id="shopMobOpts">
                <div class="items-div">
                    <div class="items-options">
                       <h5 class="category">T-SHIRTS</h5>
                        <button disabled><i class="fa-solid fa-chevron-up"></i></button>
                       <button></button>
                       <div class="items-list" >
                            <ul>
                                {{#each products}}
                                <li><a href="/product-page/{{this._id}}">{{this.category}} | {{this.color}}</a></li>
                                {{/each}}
                               
                            </ul>
                        </div>
                    
                        
                    
                    
                       </div>
                    
                    <div class="items-options" style="border-bottom: none;">
                       <div class="img-opts" style="margin-top: 3em;">
                        <img data-src="/images/our-story-resized.jpg" alt="">
                        <div class="opts">
                            <h5 class="opt">OUR STORY</h5>
                            <div class="to-link"><a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a></div>
                        </div>
                       </div>
                </div>
                </div>
                
            </div>
            <div class="MobOption" id="transpMobOpts">
                <div class="items-div">
                    <div class="items-options" style="border-bottom: none;">
                       
                       <h5 class="category">TRANSPARENCY</h5>
                        <button disabled><i class="fa-solid fa-chevron-up"></i></button>
                        <div class="items-list " >
                            <ul>
                                <li><a href="">Fair Pay</a></li>
                                <li><a href="">Transparent Supply</a></li>
                                <li><a href="">Transparent Pricing</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="items-options" style="border-bottom: none;">
                       <div class="img-opts" >
                        <img data-src="/images/fair-pay.jpg" alt="">
                        <div class="opts">
                            <h5 class="opt">FAIR PAY.FAIR TRADE</h5>
                            <div class="to-link"><a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a></div>
                        </div>
                       </div>
                </div>
                </div>
                
            </div>
            <div class="MobOption" id="abtMobOpts">
                <div class="items-div">
                    <div class="items-options" style="border-bottom: none;">
                       <h5 class="category">ABOUT US</h5>
                       <button disabled><i class="fa-solid fa-chevron-up"></i></button>
                        <div class="items-list" >
                            <ul>
                                <li><a href="">Sustainable Fashion</a></li>
                                <li><a href="">Sustainable basics</a></li>
                                <li><a href="">Our Factories</a></li>
                                <li><a href="">Our Story</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="items-options" style="border-bottom: none;">
                       <div class="img-opts">
                        <img data-src="/images/slim-fashion.jpg" alt="">
                        <div class="opts">
                            <h5 class="opt" style="margin-left: -1em;">SUSTAINABLE BASICS</h5>
                            <div class="to-link"><a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a></div>
                        </div>
                       </div>
                </div>
                    <div class="items-options" style="border-bottom: none;">
                       <div class="img-opts">
                        <img data-src="/images/factories.png" alt="">
                        <div class="opts">
                            <h5 class="opt">FACTOURISM</h5>
                            <div class="to-link"><a href="" class="more-link">READ MORE  <i class="fa-solid fa-chevron-right"></i></a></div>
                        </div>
                       </div>
                </div>
                </div>
                
            </div>
            
           </div>
           <div class="footer" id="nav-footer">
            <div class="social-media">
                <a href=""><i class="lab la-facebook-f"></i></a>
                <a href="" class="social-links"><i class="lab la-whatsapp"></i></a>
                <a href="" class="social-links"><i class="lab la-instagram"></i></a>
            </div>
           </div>         
        </div>
        </div>
    <div class="nav-items" id="mobNavItems">
        <div class="menu">
            
           <button class="menu-btn" id="menuBtn" onclick="menuBtnClicked()"><i class="las la-bars links"></i></button>
        </div>
        <div class="nav-brand" id="mobNavBrand">
           <h2><a href="/" class="links">basic<span>ally</span>.</a></h2>
        </div>
        <div class="right-opts">
            {{#if user}}
            <button class="usr-btn" style="font-size: 58px;"><a href="/accounts"><i class="las la-user-check links"></i></a></button>
            {{else}}
            <button class="usr-btn"><a href="/accounts"><i class="las la-user links" ></i></a></button>
            {{/if}}
            <button class="cart-btn" onclick="showCart()"><i class="las la-shopping-bag links"></i></button>
        </div>
    </div>

</div>
<div class="navbar"  id="navbar">
        <div class="nav-items">

        <div class="nav-brand">
        <h2><a href="/" class="links">basic<span>ally</span>.</a></h2>
        </div>
        <div class="nav-options">
            <ul>
                <li onmouseenter="shopOptHover(this)" id="shopOpt"><a class="links">Shop</a></li>
                <li onmouseenter="transpOptHover(this)" id="transpOpt"><a class="links">Transparency</a></li>
                <li onmouseenter="abtOptHover(this)" id="abtOpt"><a class="links">About</a></li>
            </ul>
        </div>
        <div class="nav-user">
            <ul>
                {{#if user}}
                <li><a href="/accounts" class="links"><i style="margin-top: 5px;" class="las la-user-check" ></i></a></li>
                {{else}}
                <li><a href="/accounts" class="links"><i class="las la-user" ></i></a></li>
                {{/if}}
                <li onclick="showCart()"><a class="links"><i class="las la-shopping-bag"></i></a></li>
            </ul>
        </div>
        <div class="shop-opts hover-options" id="shopOpts" >
            <div class="items">
            <h4><a href="" class="category">The Perfect Tees</a></h4>
            <div class="options">
                
                <div>
                    {{#each products}}
                    <div ><a onmouseover="productHovered('prmweight')" onmouseout="productOut('prmweight')"  href="/product-page/{{this._id}}" class="option">{{this.category}} | {{this.color}}</a></div>
                    {{/each}}
                    

                </div>
               
            </div>
            </div>
            
            <div class="items"></div>
            <div class="items">
            <div class="image-opts">
                <img data-src="/images/pista.jpg" id="initialImg" class="pro-images" data-img-active alt="">
                <img data-src="/images/black.jpg" id="prmImg" class="pro-images" alt="">
               
            </div>
            </div>
        </div>
        <div class="transp-opts hover-options" id="transpOpts" >
            <div class="items">
           
            <div class="options">
                
                <div>
                    <div ><a  href="" class="option">Fair Pay</a></div>
                    <div ><a  href="" class="option">Transparent Supply</a></div>
                    <div ><a  href="" class="option">Transparent Pricing</a></div>
                    <div ><a  href="" class="option">Cotton Clear Transparency</a></div>
                    

                </div>
               
            </div>
            </div>
            <div class="items">
            <div class="image-opts">
                <div class="opts" style="background: url('/images/cotton-clear.jpg');">
                <div class="details">
                    <div class="options">

                 <h4>CLEAR COTTON</h4>
                    </div>
                <div class="to-link">
                     
                    <a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a>
                </div>
                </div>
                </div>
               
            </div>
            </div>
            <div class="items">
            <div class="image-opts">
                <div class="opts" style="background: url('/images/fair-pay.jpg');">
                <div class="details">
                    <div class="options">

                 <h4>FAIR PAY.FAIR TRADE</h4>
                    </div>
                <div class="to-link">
                     
                    <a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a>
                </div>
                </div>
                </div>
               
            </div>
            </div>
            <div class="items">
            <div class="image-opts">
                <div class="opts" style="background: url('/images/fair-pay.jpg');">
                <div class="details">
                    <div class="options">

                 <h4>FAIR PAY.FAIR TRADE</h4>
                    </div>
                <div class="to-link">
                     
                    <a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a>
                </div>
                </div>
                </div>
               
            </div>
            </div>
            
        </div>
        <div class="abt-opts hover-options" id="abtOpts" >
            <div class="items">
            <h4><a href="" class="category">About Us</a></h4>
            <div class="options">
                
                <div>
                    <div ><a   href="" class="option">Slim Fashion</a></div>
                    <div ><a   href="" class="option">Substainable Basics</a></div>
                    <div ><a   href="" class="option">Our Factories</a></div>
                    <div ><a   href="" class="option">Our Journal</a></div>
                    

                </div>
               
            </div>
            </div>
           
            <div class="items">
            <div class="image-opts">
                <div class="opts" style="background: url('/images/slim-fashion.jpg');">
                <div class="details">
                    <div class="options">

                 <h4>SLIM FASHION</h4>
                    </div>
                <div class="to-link">
                     
                    <a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a>
                </div>
                </div>
                </div>
               
            </div>
            </div>
             <div class="items">
            <div class="image-opts">
                <div class="opts" style="background: url('/images/factories.png');">
                <div class="details">
                    <div class="options">

                 <h4>FACTOURISM</h4>
                    </div>
                <div class="to-link">
                     
                    <a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a>
                </div>
                </div>
                </div>
               
            </div>
            </div>
             <div class="items">
            <div class="image-opts">
                <div class="opts" style="background: url('/images/our-story-resized.jpg');">
                <div class="details">
                    <div class="options">

                 <h4>OUR STORY</h4>
                    </div>
                <div class="to-link">
                     
                    <a href="" class="more-link">LEARN MORE  <i class="fa-solid fa-chevron-right"></i></a>
                </div>
                </div>
                </div>
               
            </div>
            </div>
        </div>
    </div>
</div> 

{{!-- Cart Page Starts --}}
 <div class="cartParentDiv" id="cart" >
    <div class="hiddenDiv"></div>
    <div class="showableDiv">
      
   <div class="header">
    <div class="cart-items">
        <h5>Your Cart (<span id="cartLength">{{#if emptyCart}}0{{else}}{{cart.length}}{{/if}}</span>)</h5>
    </div>
    <div class="close-btn">
        <button id="cartCloseBtn" onclick="hideCart()"><i class="las la-times"></i></button>
    </div>
   </div>
   <div class="cart-products">
    {{#if emptyCart}}
      <div class="empty-cart">
        <h5>Your Cart is Empty</h5>
      </div>
      {{else}}
      {{#each cart}}
      <div class="cart-items">
        <div class="pro-img">
            <img data-src={{this.product.coverImage}} alt="">
        </div>
        <div class="cart-pro-details">
            <h5 class="pro-name">{{this.product.category}}</h5>
            <h5 class="pro-color">Color : <span>{{this.product.color}}</span></h5>
            <h5 class="pro-size">Size : <span>{{this.size}}</span></h5>
            <div class="pro-quantity">
                  <button class="btns" onclick="changeProductQuantity('{{this.product._id}}','{{this._id}}','{{this.quantity}}','{{this.total}}','{{this.product.price}}',1)"><i class="las la-plus"></i></button>
                  <h5 class="number" id="quantity">{{this.quantity}}</h5>
                  {{#if_eq this.quantity 1}}
                  <button class="btns" style="border-radius: 0px 25px 25px 0px;" disabled><i class="las la-minus"></i></button>
                  {{else}}
                  <button class="btns" id="minusBtn" onclick="changeProductQuantity('{{this.product._id}}','{{this._id}}','{{this.quantity}}','{{this.total}}','{{this.product.price}}',-1)" style="border-radius: 0px 25px 25px 0px;"><i class="las la-minus"></i></button>
                  {{/if_eq}}
                </div>
        </div>
        <div class="item-details">
            <div class="delete-pro">
                    <button style="cursor: pointer;" onclick="removeProduct('{{this.product._id}}','{{this._id}}','{{this.quantity}}','{{this.total}}','{{this.product.price}}')"><i class="las la-trash"></i></button>
            </div>
            <div class="price">
                <h5><i class="fa-solid fa-indian-rupee-sign"></i> <span>{{this.product.price}}</span></h5>
            </div>

        </div>
      </div>
      {{/each}}
      {{/if}}
   </div>
   <div class="total-div">
    <div class="totals">
        <div class="total">
            <h5 class="text">Sub Total</h5>
            <h5 class="price">{{#if emptyCart}}0{{else}}<i class="fa-solid fa-indian-rupee-sign"></i> <span>{{total}}</span>{{/if}}</h5>
        </div>
        <div class="total">
            <h5 class="text">Delivery Fee</h5>
            <h5 class="price"><span>Free</span></h5>
        </div>
    </div>
    <div class="final-total">
        <h5 class="text">Total</h5>
        <h5 class="price">{{#if emptyCart}}0{{else}}<i class="fa-solid fa-indian-rupee-sign"></i> <span id="total">{{total}}</span>{{/if}}</h5>
    </div>
   </div>
   {{#unless emptyCart}}
      
   <div class="checkout-btn">
    <a href="/checkout/{{cartId}}"> CHECKOUT</a>
   </div>
   {{/unless}}
 </div>
</div>
<script src="/javascripts/jquery.min.js"></script>

<script>
    async function changeProductQuantity(proId,cartId,quantity,total,price,value){
        quantity=parseInt(quantity)
        value=parseInt(value)
        let proDetails={
            proId,
            cartId,
            quantity:quantity,
            value:value,
            total,
            price
        }
        $.ajax({
           url:'/changeProductQuantity',
           method:'post',
           data:proDetails,
           success:(response)=>{
                if(response.status){
                    sessionStorage.setItem('showCart',true)
                    location.reload()


                }
           }
    })
    }
    async function removeProduct(proId,cartId,quantity,total,price){
        quantity=parseInt(quantity)
        let proDetails={
            proId,
            cartId,
            quantity:quantity,
            total,
            price
        }
        $.ajax({
            
           url:'/removeProduct',
           method:'post',
           data:proDetails,
           success:(response)=>{
                if(response.status){
                    location.reload()

                }
           }
    })
    }
</script>